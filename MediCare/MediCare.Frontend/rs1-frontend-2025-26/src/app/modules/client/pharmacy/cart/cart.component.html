<div class="container">
  <!-- Header kartica -->
  <div class="header-card mat-elevation-z2">
    <div class="header-card-content">
      <!-- Lijevo: naslov -->
      <h1>{{ 'CART.TITLE' | translate }}</h1>
</div>

  <!-- Loading / error -->
  <div *ngIf="isLoading" class="loading">
    {{ 'MEDICINE.LOADING' | translate }}
  </div>

  <div *ngIf="!isLoading && errorMessage" class="error">
    {{ errorMessage }}
  </div>
    </div>

  <!-- Tabela -->
  <div class="mat-elevation-z8" *ngIf="!isLoading && !errorMessage">
    <table mat-table [dataSource]="items">

<ng-container matColumnDef="imageFile">
  <th mat-header-cell *matHeaderCellDef>{{'MEDICINE.TABLE.PICTURE' | translate}}</th>
  <td mat-cell *matCellDef="let medicine">
    <img
      [src]="'https://localhost:7260/' + medicine.imagePath"
      alt="{{ medicine.name }}"
      style="width:100px; height:100px; object-fit:contain;"
    />

    </td>
      </ng-container>

      <!-- Naziv -->
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef>{{ 'MEDICINE.TABLE.NAME' | translate }}</th>
        <td mat-cell *matCellDef="let medicine">
           <a 
      [routerLink]="['/client/medicine', medicine.id]" 
      style="font-weight: 500; text-decoration: none; color: inherit; cursor: pointer;">
      {{ medicine.name }}
      </a>
        </td>
      </ng-container>

 <!-- KoliÄina -->
    <ng-container matColumnDef="quantity">
      <th mat-header-cell *matHeaderCellDef>{{ 'CART.TABLE.QUANTITY' | translate }}</th>
      <td mat-cell *matCellDef="let item">
        {{ item.quantity }}
      </td>
    </ng-container>

    <!-- Cijena -->
    <ng-container matColumnDef="price">
      <th mat-header-cell *matHeaderCellDef>{{ 'CART.TABLE.PRICE' | translate }}</th>
      <td mat-cell *matCellDef="let item">
        <span style="font-weight: 600; color: #4976b5">
          {{ item.price | number: '1.2-2' }} KM
        </span>
      </td>
    </ng-container>

    <!-- Akcije -->
    <ng-container matColumnDef="actions">
      <th mat-header-cell *matHeaderCellDef>{{ 'CART.TABLE.ACTIONS' | translate }}</th>
      <td mat-cell *matCellDef="let item">
        <button
          mat-icon-button
          color="warn"
          (click)="removeItem(item)"
          [matTooltip]="'CART.ACTIONS.REMOVE_TOOLTIP' | translate"
        >
          <mat-icon>delete</mat-icon>
        </button>
      </td>
    </ng-container>

    <!-- Header i Row definicije -->
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

    <!-- No data -->
    <tr class="mat-row" *matNoDataRow>
      <td class="mat-cell" colspan="5">
        <ng-container *ngIf="request.search; else noDataDefault">
          {{ 'CART.NO_DATA_FILTER' | translate }}
        </ng-container>
        <ng-template #noDataDefault>
          {{ 'CART.NO_DATA' | translate }}
        </ng-template>
      </td>
    </tr>
  </table>

</div>  

<div class="cart-total" style="text-align: right; font-weight: 600; font-size: 1.2rem; margin-top: 1rem;">
  Total: {{ cartTotal | number:'1.2-2' }} KM
</div>

<button (click)="checkout()" [disabled]="isCheckingOut || items.length === 0">Checkout</button>



