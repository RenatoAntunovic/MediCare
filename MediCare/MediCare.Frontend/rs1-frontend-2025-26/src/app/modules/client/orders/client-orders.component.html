<div class="container">
  <!-- Header Card -->
  <div class="header-card">
    <div class="header-card-content">
      <!-- Left: Title with Icon -->
      <div class="title-section">
        <div class="title-icon">
          <mat-icon>list_alt</mat-icon>
        </div>
        <h1>{{ 'ORDERS.TITLE' | translate }}</h1>
      </div>
  </div>
</div>

  <!-- Skeleton Loader -->
  <app-fit-table-skeleton
    *ngIf="isLoading && !errorMessage"
    [rows]="10"
    [columns]="5"
    [showActions]="true">
  </app-fit-table-skeleton>

  <!-- Error -->
  <div *ngIf="!isLoading && errorMessage" class="error-container">
    <mat-icon>error_outline</mat-icon>
    <div class="error-content">
      <p class="error-title">{{ 'ORDERS.ERROR_TITLE' | translate }}</p>
      <p class="error-message">{{ errorMessage }}</p>
      <button mat-stroked-button color="primary" (click)="loadPagedData()">
        <mat-icon>refresh</mat-icon>
        {{ 'ORDERS.RETRY' | translate }}
      </button>
    </div>
  </div>

  <!-- Table Card -->
  <div class="table-card" *ngIf="!isLoading && !errorMessage">
    <table mat-table [dataSource]="items" class="orders-table">

      <!-- ID Column -->
<ng-container matColumnDef="id">
  <th mat-header-cell *matHeaderCellDef>
    <div class="header-cell">
      <mat-icon class="header-icon">fingerprint</mat-icon>
      {{ 'ORDERS.TABLE.ID' | translate }}
    </div>
  </th>
  <td mat-cell *matCellDef="let order">
    <span class="order-id">{{ order.id }}</span>
  </td>
</ng-container>


      <!-- Customer Column -->
      <ng-container matColumnDef="customer">
        <th mat-header-cell *matHeaderCellDef>
          <div class="header-cell">
            <mat-icon class="header-icon">person</mat-icon>
            {{ 'ORDERS.TABLE.CUSTOMER' | translate }}
          </div>
        </th>
        <td mat-cell *matCellDef="let order">
          <div class="customer-info">
            <span class="customer-name">{{ getCustomerName(order) }}</span>
            <span class="customer-address">{{ getCustomerAddress(order) }}</span>
          </div>
        </td>
      </ng-container>

      <!-- Ordered At Column -->
<ng-container matColumnDef="orderDate">
  <th mat-header-cell *matHeaderCellDef>
    <div class="header-cell">
      <mat-icon class="header-icon">schedule</mat-icon>
      {{ 'ORDERS.TABLE.ORDER_DATE' | translate }}
    </div>
  </th>
  <td mat-cell *matCellDef="let order">
    <div class="date-info">
      <span class="date">{{ order.orderDate | date:'dd.MM.yyyy' }}</span>
      <span class="time">{{ order.orderDate | date:'HH:mm' }}</span>
    </div>
  </td>
</ng-container>


      <!-- Total Amount Column -->
      <ng-container matColumnDef="totalAmount">
        <th mat-header-cell *matHeaderCellDef>
          <div class="header-cell">
            <mat-icon class="header-icon">payments</mat-icon>
            {{ 'ORDERS.TABLE.TOTAL_AMOUNT' | translate }}
          </div>
        </th>
        <td mat-cell *matCellDef="let order">
          <span class="amount">{{ order.totalAmount}} KM</span>
        </td>
      </ng-container>

      <!-- Status Column -->
      <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef>
          <div class="header-cell">
            <mat-icon class="header-icon">flag</mat-icon>
            {{ 'ORDERS.TABLE.STATUS' | translate }}
          </div>
        </th>
        <td mat-cell *matCellDef="let order">
          <div class="status-badge" [ngClass]="getStatusClass(order.status)">
            <mat-icon>{{ getStatusIcon(order.statusId) }}</mat-icon>
            <span>{{ getStatusLabel(order.statusId) | translate }}</span>
          </div>
        </td>
      </ng-container>

      <!-- Actions Column -->
      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef>
          <div class="header-cell">
            <mat-icon class="header-icon">settings</mat-icon>
            {{ 'ORDERS.TABLE.ACTIONS' | translate }}
          </div>
        </th>
        <td mat-cell *matCellDef="let order">
          <div class="action-buttons">
            <button
              mat-icon-button
              color="primary"
              (click)="onViewDetails(order, $event)"
              [matTooltip]="'ORDERS.ACTIONS.VIEW_DETAILS' | translate"
              class="action-btn view-btn">
              <mat-icon>visibility</mat-icon>
            </button>
          </div>
        </td>
      </ng-container>

      <!-- Header Row -->
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>

      <!-- Data Rows -->
      <tr
        mat-row
        *matRowDef="let row; columns: displayedColumns"
        class="data-row"
        (click)="onViewDetails(row)">
      </tr>

      <!-- No Data Row -->
      <tr class="mat-row no-data-row" *matNoDataRow>
        <td class="mat-cell" [attr.colspan]="displayedColumns.length">
          <div class="no-data-content">
            <mat-icon>shopping_cart</mat-icon>
            <p>
              <ng-container *ngIf="searchControl.value || statusFilter; else noDataDefault">
                {{ 'ORDERS.NO_DATA_FILTER' | translate }}
              </ng-container>
              <ng-template #noDataDefault>
                {{ 'ORDERS.NO_DATA' | translate }}
              </ng-template>
            </p>
          </div>
        </td>
      </tr>
    </table>
  </div>
</div>
